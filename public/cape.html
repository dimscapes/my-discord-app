<!DOCTYPE html>
<html lang="en-US" dir="ltr">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <!-- ===============================================-->
    <!--    Document Title-->
    <!-- ===============================================-->
    <title>Dim's Capes</title>


    <!-- ===============================================-->
    <!--    Favicons-->
    <!-- ===============================================-->
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">
    <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

    <!-- ===============================================-->
    <!--    Stylesheets-->
    <!-- ===============================================-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+Bhaijaan+2:wght@400;500;600;700&amp;family=Poppins:ital,wght@0,400;0,500;0,600;0,700;1,300&amp;family=Marvel:wght@400;700&amp;display=swap" rel="stylesheet">
    <link href="assets/css/theme.css" rel="stylesheet" />
    <link href="assets/css/user.css" rel="stylesheet" />

  </head>


  <body>

    <!-- ===============================================-->
    <!--    Main Content-->
    <!-- ===============================================-->
    <main class="main" id="top">
      <nav class="navbar navbar-expand-lg navbar-light fixed-top py-3" data-navbar-on-scroll="light">
        <div class="container"><a class="navbar-brand" href="/staff"><img src="assets/img/icons/Logo.png" height="35" alt="logo" /></a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
          <div class="collapse navbar-collapse border-top border-lg-0 mt-4 mt-lg-0" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto pt-2 pt-lg-0 font-base align-items-center">
              <li class="nav-item"><a class="nav-link px-3" href="/staff">Home</a></li>
              <li class="nav-item" id="capeToolTab" style="display:none;"><a class="nav-link px-3" href="/cape">Cape Tool</a></li>
              <li class="nav-item" id="moderationTab" style="display:none;"><a class="nav-link px-3" href="/mod">Moderation</a></li>
              <li class="nav-item" id="adminTab" style="display:none;"><a class="nav-link pl-3 me-3" href="/admin">Admin</a></li>
            </ul>
            <button class="btn btn-primary" id="login-button">Log out</button>
            <script>
              document.getElementById('login-button').addEventListener('click', function() {
                  window.location.href = '/logout'; // Redirect to the Discord login route
              });
          </script>
          <script>
            // Fetch user roles from the server
            fetch('/api/user/roles')
              .then(response => response.json())
              .then(data => {
                const roles = data.roles;
          
                // Check if the user has the "Cape Team" or "Administration" role
                if (roles.includes('Cape Team') || roles.includes('Administration')) {
                  document.getElementById('capeToolTab').style.display = 'block';  // Show the "Cape Tool" tab
                }
              })
              .catch(error => console.error('Error fetching roles:', error));
          </script>
          <script>
            // Fetch user roles from the server
            fetch('/api/user/roles')
              .then(response => response.json())
              .then(data => {
                const roles = data.roles;
          
                // Check if the user has the "Cape Team" or "Administration" role
                if (roles.includes('Moderation') || roles.includes('Administration')) {
                  document.getElementById('moderationTab').style.display = 'block';  // Show the "Cape Tool" tab
                }
              })
              .catch(error => console.error('Error fetching roles:', error));
          </script>
          <script>
            // Fetch user roles from the server
            fetch('/api/user/roles')
              .then(response => response.json())
              .then(data => {
                const roles = data.roles;
          
                // Check if the user has the "Cape Team" or "Administration" role
                if (roles.includes('Administration')) {
                  document.getElementById('adminTab').style.display = 'block';  // Show the "Cape Tool" tab
                }
              })
              .catch(error => console.error('Error fetching roles:', error));
          </script>
          </div>
        </div>
      </nav>
      <section class="py-7 py-lg-5" id="home">
        <div class="bg-holder bg-size" style="background-image:url(assets/img/illustration/2.png);background-position:left top;background-size:contain;">
        </div>
        <!--/.bg-holder-->

        <!--/.bg-holder-->
      </section>

      <div class="container d-flex">
        <div class="preview flex-grow-1 d-flex justify-content-center align-items-center overflow-auto">
            <div class="image position-relative" style="width: 900px; height: 1750px; border: 1px solid #000; background-color: #fff; overflow: hidden;">
                <div class="black-box position-absolute" style="width: 900px; height: 1750px; background-color: #000;"></div>
                <div class="changeable-box position-absolute" style="width: 800px; height: 1650px; top: 50px; left: 50px; background-color: #ccc;"></div>
                <div class="black-box position-absolute" style="width: 720px; height: 1570px; top: 90px; left: 90px; background-color: #000;"></div>

                <div class="color-box position-absolute" style="width: 684px; height: 684px; top: 533px; left: 108px; background-color: #ccc;"></div>
                <img src="assets/img/gallery/image.png" alt="Image" class="colored-image position-absolute" style="width: 684px; height: 684px; top: 533px; left: 108px;">
                <img src="assets/img/gallery/logo.png" alt="Logo" class="logo position-absolute" style="width: 684px; height: 684px; top: 533px; left: 108px;">

                <div class="text text1 position-absolute" style="top: 185px; font-size: 160px; font-family: 'Marvel', sans-serif; font-weight: bold; color: #ccc; text-align: center; width: 900px; height: 160px;">Username</div>
                <div class="text text2 position-absolute" style="top: 380px; font-size: 77px; font-family: 'Marvel', sans-serif; font-weight: bold; color: #ccc; text-align: center; width: 900px; height: 160px;">Rank</div>
                <div class="text text3 position-absolute" style="top: 1260px; font-size: 95px; font-family: 'Marvel', sans-serif; font-weight: bold; color: #ccc; text-align: center; width: 900px; height: 160px;">Role</div>
                <div class="text text4 position-absolute" style="top: 1360px; font-size: 90px; font-family: 'Marvel', sans-serif; font-weight: bold; color: #ccc; text-align: center; width: 900px; height: 160px;">Made by Dimssen</div>
            </div>
        </div>

        <div class="options" style="width: 300px; padding: 20px; background-color: #f0f0f0; overflow: auto;">
            <div class="text-option mb-3">
                <input type="text" class="form-control" id="text1" placeholder="Username">
                <input type="number" class="form-control mt-2" id="fontSizeText1" min="20" max="200" value="160">
            </div>
            <div class="text-option mb-3">
                <input type="text" class="form-control" id="text2" placeholder="Rank">
                <input type="number" class="form-control mt-2" id="fontSizeText2" min="20" max="200" value="77">
            </div>
            <div class="text-option mb-3">
                <input type="text" class="form-control" id="text3" placeholder="Role">
                <input type="number" class="form-control mt-2" id="fontSizeText3" min="20" max="200" value="95">
            </div>
            <div class="text-option mb-3">
                <input type="text" class="form-control" id="text4" placeholder="Made by Dimssen" disabled>
                <input type="number" class="form-control mt-2" id="fontSizeText4" min="20" max="200" value="90">
            </div>
            <input type="color" class="form-control mb-3" id="colorPicker" value="#cccccc">
            <button class="btn btn-success btn-block" id="downloadButton">Download Image</button>
        </div>
    </div>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
      const text1Input = document.getElementById('text1');
      const text2Input = document.getElementById('text2');
      const text3Input = document.getElementById('text3');
      const text4Input = document.getElementById('text4');
      const fontSizeText1 = document.getElementById('fontSizeText1');
      const fontSizeText2 = document.getElementById('fontSizeText2');
      const fontSizeText3 = document.getElementById('fontSizeText3');
      const fontSizeText4 = document.getElementById('fontSizeText4');
      const colorPicker = document.getElementById('colorPicker');
      const downloadButton = document.getElementById('downloadButton');
  
      window.onload = function() {
          text1Input.value = '';
          text2Input.value = '';
          text3Input.value = '';
          document.getElementById('fontSizeText1').value = 160;
          document.getElementById('fontSizeText2').value = 77;
          document.getElementById('fontSizeText3').value = 95;
          document.getElementById('fontSizeText4').value = 90;
          colorPicker.value = '#cccccc';
      };
  
      // Event listeners for text content update
      text1Input.addEventListener('input', () => updateText('.text1', text1Input.value));
      text2Input.addEventListener('input', () => updateText('.text2', text2Input.value));
      text3Input.addEventListener('input', () => updateText('.text3', text3Input.value));
      text4Input.addEventListener('input', () => updateText('.text4', text4Input.value));
  
      // Event listeners for font size update
      fontSizeText1.addEventListener('input', () => updateFontSize('.text1', fontSizeText1.value));
      fontSizeText2.addEventListener('input', () => updateFontSize('.text2', fontSizeText2.value));
      fontSizeText3.addEventListener('input', () => updateFontSize('.text3', fontSizeText3.value));
      fontSizeText4.addEventListener('input', () => updateFontSize('.text4', fontSizeText4.value));
  
      // Event listener for color change
      colorPicker.addEventListener('input', () => changeColor(colorPicker.value));
  
      // Event listener for download button
      downloadButton.addEventListener('click', downloadImage);
  
      function updateText(element, text) {
          document.querySelector(element).textContent = text || '';
      }
  
      function updateFontSize(element, size) {
          document.querySelector(element).style.fontSize = `${size}px`;
      }
  
      function changeColor(color) {
          const textElements = document.querySelectorAll('.text');
          const changeableBox = document.querySelector('.changeable-box');
          const colorOverlay = document.querySelector('.color-box');
          textElements.forEach(element => {
              element.style.color = color;
          });
          colorOverlay.style.backgroundColor = color;
          changeableBox.style.backgroundColor = color;
      }
  
      function downloadImage() {
    const imageContainer = document.querySelector('.image');
    
    // Temporarily remove any overflow styles
    const originalOverflow = imageContainer.style.overflow;
    imageContainer.style.overflow = 'visible';

    // Set the width and height options in html2canvas
    html2canvas(imageContainer, {
        scale: 2,
        width: 900,
        height: 1750,
        useCORS: true, // Enable cross-origin resource sharing
    })
    .then(canvas => {
        const link = document.createElement('a');
        link.href = canvas.toDataURL('image/png');
        link.download = 'image.png';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);

        // Reset the overflow style
        imageContainer.style.overflow = originalOverflow;
    })
    .catch(err => {
        console.error('Error generating image:', err);
        // Reset the overflow style in case of an error
        imageContainer.style.overflow = originalOverflow;
    });
}

  </script>
    
      <!-- ============================================-->
      <!-- <section> begin ============================-->
      
      <!-- <section> close ============================-->
      <!-- ============================================-->



      </section>
    </main>
    <!-- ===============================================-->
    <!--    End of Main Content-->
    <!-- ===============================================-->




    <!-- ===============================================-->
    <!--    JavaScripts-->
    <!-- ===============================================-->
    <script src="vendors/popper/popper.min.js"></script>
    <script src="vendors/bootstrap/bootstrap.min.js"></script>
    <script src="vendors/anchorjs/anchor.min.js"></script>
    <script src="vendors/is/is.min.js"></script>
    <script src="vendors/fontawesome/all.min.js"></script>
    <script src="vendors/lodash/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.0/gsap.min.js"></script>
    <script src="vendors/imagesloaded/imagesloaded.pkgd.js"></script>
    <script src="vendors/gsap/customEase.js"></script>
    <script src="vendors/gsap/scrollToPlugin.js"></script>
    <!--script(src=`${CWD}vendors/gsap/drawSVGPlugin.js`)-->
    <script src="assets/js/theme.js"></script>

  </body>

</html>